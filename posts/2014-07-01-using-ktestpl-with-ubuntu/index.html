<!doctype html><html lang><head><link rel=preload href=/chrisarges.net/lib/font-awesome/webfonts/fa-brands-400.woff2 as=font type=font/woff2 crossorigin=anonymous><link rel=preload href=/chrisarges.net/lib/font-awesome/webfonts/fa-regular-400.woff2 as=font type=font/woff2 crossorigin=anonymous><link rel=preload href=/chrisarges.net/lib/font-awesome/webfonts/fa-solid-900.woff2 as=font type=font/woff2 crossorigin=anonymous><link rel=preload href=/chrisarges.net/lib/JetBrainsMono/web/woff2/JetBrainsMono-Regular.woff2 as=font type=font/woff2 crossorigin=anonymous><script type=text/javascript src=https://latest.cactus.chat/cactus.js></script>
<link rel=stylesheet href=https://latest.cactus.chat/style.css type=text/css><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><title>using ktest.pl with ubuntu |</title><link rel=canonical href=chrisarges.net/posts/2014-07-01-using-ktestpl-with-ubuntu/><meta name=viewport content="width=device-width,initial-scale=1"><meta name=robots content="all,follow"><meta name=googlebot content="index,follow,snippet,archive"><meta property="og:title" content="using ktest.pl with ubuntu"><meta property="og:description" content="Bisecting the kernel is one of those tasks that&rsquo;s time-consuming and error prone. Ktest.pl is a script that lives in the linux kernel source tree that helps to automate this process. The script is extremely extensible and as such takes time to understand which variables need to be set and where. In this post, I&rsquo;ll go over how to perform a kernel bisection using a VM as the target machine. In this example I&rsquo;m using &lsquo;ubuntu&rsquo; as the VM name."><meta property="og:type" content="article"><meta property="og:url" content="chrisarges.net/posts/2014-07-01-using-ktestpl-with-ubuntu/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2014-07-01T13:10:00-07:00"><meta property="article:modified_time" content="2014-07-01T13:10:00-07:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="using ktest.pl with ubuntu"><meta name=twitter:description content="Bisecting the kernel is one of those tasks that&rsquo;s time-consuming and error prone. Ktest.pl is a script that lives in the linux kernel source tree that helps to automate this process. The script is extremely extensible and as such takes time to understand which variables need to be set and where. In this post, I&rsquo;ll go over how to perform a kernel bisection using a VM as the target machine. In this example I&rsquo;m using &lsquo;ubuntu&rsquo; as the VM name."><link rel=stylesheet href=/chrisarges.net/css/styles.c05d68261bf086a9d7713c4f8a6215a3601608e267a816a7ee58f139b3d1aae51222aae2081c8e0c6bd35e1334773b7a16283022f31f92afd93bb37e5e822e66.css integrity="sha512-wF1oJhvwhqnXcTxPimIVo2AWCOJnqBan7ljxObPRquUSIqriCByODGvTXhM0dzt6FigwIvMfkq/ZO7N+XoIuZg=="><!--[if lt IE 9]><script src=https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js></script>
<script src=https://oss.maxcdn.com/respond/1.4.2/respond.min.js></script><![endif]--><link rel=icon type=image/png href=chrisarges.net/images/favicon.ico></head><body class="max-width mx-auto px3 ltr"><div class="content index py4"><div id=header-post><a id=menu-icon href=#><i class="fas fa-bars fa-lg"></i></a>
<a id=menu-icon-tablet href=#><i class="fas fa-bars fa-lg"></i></a>
<a id=top-icon-tablet href=# onclick='$("html, body").animate({scrollTop:0},"fast")' style=display:none aria-label="Top of Page"><i class="fas fa-chevron-up fa-lg"></i></a>
<span id=menu><span id=nav><ul><li><a href=chrisarges.net/>Home</a></li><li><a href=chrisarges.net/about>About</a></li></ul></span><br><span id=actions><ul><li><a class=icon href=chrisarges.net/posts/2014-06-25-using-criu-to-checkpoint-kernel-build/ aria-label=Previous><i class="fas fa-chevron-left" aria-hidden=true onmouseover='$("#i-prev").toggle()' onmouseout='$("#i-prev").toggle()'></i></a></li><li><a class=icon href=chrisarges.net/posts/2014-10-31-getting-kernel-crashdumps-for-hung/ aria-label=Next><i class="fas fa-chevron-right" aria-hidden=true onmouseover='$("#i-next").toggle()' onmouseout='$("#i-next").toggle()'></i></a></li><li><a class=icon href=# onclick='$("html, body").animate({scrollTop:0},"fast")' aria-label="Top of Page"><i class="fas fa-chevron-up" aria-hidden=true onmouseover='$("#i-top").toggle()' onmouseout='$("#i-top").toggle()'></i></a></li><li><a class=icon href=# aria-label=Share><i class="fas fa-share-alt" aria-hidden=true onmouseover='$("#i-share").toggle()' onmouseout='$("#i-share").toggle()' onclick='return $("#share").toggle(),!1'></i></a></li></ul><span id=i-prev class=info style=display:none>Previous post</span>
<span id=i-next class=info style=display:none>Next post</span>
<span id=i-top class=info style=display:none>Back to top</span>
<span id=i-share class=info style=display:none>Share post</span></span><br><div id=share style=display:none><ul><li><a class=icon href="http://www.facebook.com/sharer.php?u=chrisarges.net%2fposts%2f2014-07-01-using-ktestpl-with-ubuntu%2f" aria-label=Facebook><i class="fab fa-facebook" aria-hidden=true></i></a></li><li><a class=icon href="https://twitter.com/share?url=chrisarges.net%2fposts%2f2014-07-01-using-ktestpl-with-ubuntu%2f&text=using%20ktest.pl%20with%20ubuntu" aria-label=Twitter><i class="fab fa-twitter" aria-hidden=true></i></a></li><li><a class=icon href="http://www.linkedin.com/shareArticle?url=chrisarges.net%2fposts%2f2014-07-01-using-ktestpl-with-ubuntu%2f&title=using%20ktest.pl%20with%20ubuntu" aria-label=Linkedin><i class="fab fa-linkedin" aria-hidden=true></i></a></li><li><a class=icon href="https://pinterest.com/pin/create/bookmarklet/?url=chrisarges.net%2fposts%2f2014-07-01-using-ktestpl-with-ubuntu%2f&is_video=false&description=using%20ktest.pl%20with%20ubuntu" aria-label=Pinterest><i class="fab fa-pinterest" aria-hidden=true></i></a></li><li><a class=icon href="mailto:?subject=using%20ktest.pl%20with%20ubuntu&body=Check out this article: chrisarges.net%2fposts%2f2014-07-01-using-ktestpl-with-ubuntu%2f" aria-label=Email><i class="fas fa-envelope" aria-hidden=true></i></a></li><li><a class=icon href="https://getpocket.com/save?url=chrisarges.net%2fposts%2f2014-07-01-using-ktestpl-with-ubuntu%2f&title=using%20ktest.pl%20with%20ubuntu" aria-label=Pocket><i class="fab fa-get-pocket" aria-hidden=true></i></a></li><li><a class=icon href="http://reddit.com/submit?url=chrisarges.net%2fposts%2f2014-07-01-using-ktestpl-with-ubuntu%2f&title=using%20ktest.pl%20with%20ubuntu" aria-label=reddit><i class="fab fa-reddit" aria-hidden=true></i></a></li><li><a class=icon href="http://www.tumblr.com/share/link?url=chrisarges.net%2fposts%2f2014-07-01-using-ktestpl-with-ubuntu%2f&name=using%20ktest.pl%20with%20ubuntu&description=Bisecting%20the%20kernel%20is%20one%20of%20those%20tasks%20that%26rsquo%3bs%20time-consuming%20and%20error%20prone.%20Ktest.pl%20is%20a%20script%20that%20lives%20in%20the%20linux%20kernel%20source%20tree%20that%20helps%20to%20automate%20this%20process.%20The%20script%20is%20extremely%20extensible%20and%20as%20such%20takes%20time%20to%20understand%20which%20variables%20need%20to%20be%20set%20and%20where.%20In%20this%20post%2c%20I%26rsquo%3bll%20go%20over%20how%20to%20perform%20a%20kernel%20bisection%20using%20a%20VM%20as%20the%20target%20machine.%20In%20this%20example%20I%26rsquo%3bm%20using%20%26lsquo%3bubuntu%26rsquo%3b%20as%20the%20VM%20name." aria-label=Tumblr><i class="fab fa-tumblr" aria-hidden=true></i></a></li><li><a class=icon href="https://news.ycombinator.com/submitlink?u=chrisarges.net%2fposts%2f2014-07-01-using-ktestpl-with-ubuntu%2f&t=using%20ktest.pl%20with%20ubuntu" aria-label="Hacker News"><i class="fab fa-hacker-news" aria-hidden=true></i></a></li></ul></div></span></div><article class=post itemscope itemtype=http://schema.org/BlogPosting><header><h1 class=posttitle itemprop="name headline">using ktest.pl with ubuntu</h1><div class=meta><div class=postdate><time datetime="2014-07-01 13:10:00.002 -0700 -0700" itemprop=datePublished>2014-07-01</time></div><div class=article-tag><i class="fas fa-tag"></i>
<a class=tag-link href=/tags/ktest rel=tag>ktest</a>
,
<a class=tag-link href=/tags/kernel rel=tag>kernel</a>
,
<a class=tag-link href=/tags/kvm rel=tag>kvm</a>
,
<a class=tag-link href=/tags/ubuntu rel=tag>ubuntu</a></div></div></header><div id=toc><nav id=TableOfContents></nav></div><div class=content itemprop=articleBody><p>Bisecting the kernel is one of those tasks that&rsquo;s time-consuming and error prone.
Ktest.pl is a script that lives in the linux kernel source <a href="http://git.kernel.org/cgit/linux/kernel/git/torvalds/linux.git/tree/tools/testing/ktest?id=HEAD">tree</a> that helps
to automate this process. The script is extremely extensible and as
such takes time to understand which variables need to be set and where. In this
post, I&rsquo;ll go over how to perform a kernel bisection using a VM as the target
machine. In this example I&rsquo;m using &lsquo;ubuntu&rsquo; as the VM name.</p><p>First, ensure you have all dependencies correctly setup:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>sudo apt-get install libvirt-bin qemu-kvm cpu-checker virtinst uvtool git
</span></span><span style=display:flex><span>sudo apt-get build-dep linux-image-<span style=color:#e6db74>`</span>uname -r<span style=color:#e6db74>`</span>
</span></span></code></pre></div><p>Now, ensure kvm works: <code>kvm-ok</code></p><p>In this example we are using uvtool to create VMs using cloud images, but you
could just as easily use a preseed install or a manual install via an ISO.</p><p>Next sync the cloud image, and clone the necessary git directory:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>uvt-simplestreams-libvirt sync release<span style=color:#f92672>=</span>trusty arch<span style=color:#f92672>=</span>amd64
</span></span><span style=display:flex><span>git clone git://git.kernel.org/pub/scm/linux/kernel/git/torvalds/linux.git linux.git
</span></span></code></pre></div><p>Copy ktest.pl outside of the linux kernel (since bisecting it also changes the
script, this way it remains constant):</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>cd linux
</span></span><span style=display:flex><span>cp tools/testing/ktest/ktest.pl ..
</span></span><span style=display:flex><span>cp -r tools/testing/ktest/examples/include ..
</span></span><span style=display:flex><span>cd ..
</span></span></code></pre></div><p>Create directories for script:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>mkdir configs build
</span></span><span style=display:flex><span>mkdir configs/ubuntu build/ubuntu
</span></span></code></pre></div><p>Get an appropriate config for the bisect you are using and ensure it can
reasonably <code>make oldconfig</code> with the kernel version you are using. For example,
if we are bisecting v3.4 kernels, we can use an Ubuntu v3.5 series kernel config
and <code>yes '' | make oldconfig</code> to ensure it is very close. Put this config
into <code>configs/ubuntu/config-min</code>.</p><p>Create the VM, ensure you have ssh keys setup on your local machine first:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>uvt-kvm create ubuntu release<span style=color:#f92672>=</span>trusty arch<span style=color:#f92672>=</span>amd64 --password ubuntu
</span></span></code></pre></div><p>Ensure the VM can be ssh&rsquo;ed to via <code>ssh ubuntu@ubuntu</code>:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>echo <span style=color:#e6db74>&#34;</span><span style=color:#66d9ef>$(</span>uvt-kvm ip ubuntu<span style=color:#66d9ef>)</span><span style=color:#e6db74> ubuntu&#34;</span> | sudo tee -a /etc/hosts
</span></span></code></pre></div><p>SSH into the VM <code>with ssh ubuntu@ubuntu</code>.
Set up the initial target kernel to boot on the VM:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>sudo cp /boot/vmlinuz-<span style=color:#e6db74>`</span>uname -r<span style=color:#e6db74>`</span> /boot/vmlinuz-test
</span></span><span style=display:flex><span>sudo cp /boot/initrd.img-<span style=color:#e6db74>`</span>uname -r<span style=color:#e6db74>`</span> /boot/initrd.img-test
</span></span></code></pre></div><p>Ensure SUBMENUs are disabled on the VM, as the grub2 detection script in ktest.pl
fails with submenus, and update grub.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>echo <span style=color:#e6db74>&#34;GRUB_DISABLE_SUBMENU=y&#34;</span> | sudo tee -a /etc/default/grub
</span></span><span style=display:flex><span>sudo update-grub
</span></span></code></pre></div><p>Ensure we have a serial console on the VM with <code>/etc/init/ttyS0.conf</code>, and ensure
that agetty automatically logs in as root. If you ran with the above script you
can do the following:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>sudo sed -i <span style=color:#e6db74>&#39;s/exec \/sbin\/getty/exec \/sbin\/getty -a root/&#39;</span> /etc/init/ttyS0.conf
</span></span></code></pre></div><p>Ensure that <code>/root/.ssh/authorized_keys</code> on the VM contains the host keys so that
<code>ssh root@ubuntu</code> works automatically. If you are using the above commands
you can do:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>sudo sed -i <span style=color:#e6db74>&#39;s/^.*ssh-rsa/ssh-rsa/g&#39;</span> /root/.ssh/authorized_keys
</span></span></code></pre></div><p>Finally add a test case to <code>/home/ubuntu/test.sh</code> inside of the ubuntu VM. Ensure
it is executable.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>#!/bin/bash</span>
</span></span><span style=display:flex><span><span style=color:#75715e># Make a unique string</span>
</span></span><span style=display:flex><span>STRING<span style=color:#f92672>=</span><span style=color:#66d9ef>$(</span>cat /dev/urandom | tr -dc <span style=color:#e6db74>&#39;a-zA-Z0-9&#39;</span> | head -c 32<span style=color:#66d9ef>)</span> &gt; /var/log/syslog
</span></span><span style=display:flex><span>echo $STRING &gt; /dev/kmsg
</span></span><span style=display:flex><span><span style=color:#75715e># Wait for things to settle down...</span>
</span></span><span style=display:flex><span>sleep <span style=color:#ae81ff>5</span>
</span></span><span style=display:flex><span>grep $STRING /var/log/syslog
</span></span><span style=display:flex><span><span style=color:#75715e># This should return 0.</span>
</span></span></code></pre></div><p>Now exit out of the machine and create the following configuration file for
ktest.pl called ubuntu.conf. This will bisect from v3.4 (good) to v3.5-rc1
(bad), and run the test case that we put into the VM.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># Setup default machine</span>
</span></span><span style=display:flex><span>MACHINE <span style=color:#f92672>=</span> ubuntu
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Use virsh to read the serial console of the guest</span>
</span></span><span style=display:flex><span>CONSOLE <span style=color:#f92672>=</span> virsh console <span style=color:#e6db74>${</span>MACHINE<span style=color:#e6db74>}</span>
</span></span><span style=display:flex><span>CLOSE_CONSOLE_SIGNAL <span style=color:#f92672>=</span> KILL
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Include defaults from upstream</span>
</span></span><span style=display:flex><span>INCLUDE include/defaults.conf
</span></span><span style=display:flex><span>DEFAULTS OVERRIDE
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Make sure we load up our machine to speed up builds</span>
</span></span><span style=display:flex><span>BUILD_OPTIONS <span style=color:#f92672>=</span> -j12
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># This is required for restarting VMs</span>
</span></span><span style=display:flex><span>POWER_CYCLE <span style=color:#f92672>=</span> virsh destroy <span style=color:#e6db74>${</span>MACHINE<span style=color:#e6db74>}</span>; sleep 5; virsh start <span style=color:#e6db74>${</span>MACHINE<span style=color:#e6db74>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Use the defaults that update-grub spits out</span>
</span></span><span style=display:flex><span>GRUB_FILE <span style=color:#f92672>=</span> /boot/grub/grub.cfg
</span></span><span style=display:flex><span>GRUB_MENU <span style=color:#f92672>=</span> Ubuntu, with Linux test
</span></span><span style=display:flex><span>GRUB_REBOOT <span style=color:#f92672>=</span> grub-reboot
</span></span><span style=display:flex><span>REBOOT_TYPE <span style=color:#f92672>=</span> grub2
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>DEFAULTS
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Do a simple bisect</span>
</span></span><span style=display:flex><span>TEST_START
</span></span><span style=display:flex><span>RUN_TEST <span style=color:#f92672>=</span> <span style=color:#e6db74>${</span>SSH<span style=color:#e6db74>}</span> /home/ubuntu/test.sh
</span></span><span style=display:flex><span>TEST_TYPE <span style=color:#f92672>=</span> bisect
</span></span><span style=display:flex><span>BISECT_GOOD <span style=color:#f92672>=</span> v3.4
</span></span><span style=display:flex><span>BISECT_BAD <span style=color:#f92672>=</span> v3.5-rc1
</span></span><span style=display:flex><span>CHECKOUT <span style=color:#f92672>=</span> origin/master
</span></span><span style=display:flex><span>BISECT_TYPE <span style=color:#f92672>=</span> test
</span></span><span style=display:flex><span>TEST <span style=color:#f92672>=</span> <span style=color:#e6db74>${</span>RUN_TEST<span style=color:#e6db74>}</span>
</span></span><span style=display:flex><span>BISECT_CHECK <span style=color:#f92672>=</span> <span style=color:#ae81ff>1</span>
</span></span></code></pre></div><p>Now you are ready to run the bisection (this will take many, many hours depending on the
speed of your machine):</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>./ktest.pl ubuntu.conf
</span></span></code></pre></div></div></article><div id=footer-post-container><div id=footer-post><div id=nav-footer style=display:none><ul><li><a href=chrisarges.net/>Home</a></li><li><a href=chrisarges.net/about>About</a></li></ul></div><div id=share-footer style=display:none><ul><li><a class=icon href="http://www.facebook.com/sharer.php?u=chrisarges.net%2fposts%2f2014-07-01-using-ktestpl-with-ubuntu%2f" aria-label=Facebook><i class="fab fa-facebook fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="https://twitter.com/share?url=chrisarges.net%2fposts%2f2014-07-01-using-ktestpl-with-ubuntu%2f&text=using%20ktest.pl%20with%20ubuntu" aria-label=Twitter><i class="fab fa-twitter fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="http://www.linkedin.com/shareArticle?url=chrisarges.net%2fposts%2f2014-07-01-using-ktestpl-with-ubuntu%2f&title=using%20ktest.pl%20with%20ubuntu" aria-label=Linkedin><i class="fab fa-linkedin fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="https://pinterest.com/pin/create/bookmarklet/?url=chrisarges.net%2fposts%2f2014-07-01-using-ktestpl-with-ubuntu%2f&is_video=false&description=using%20ktest.pl%20with%20ubuntu" aria-label=Pinterest><i class="fab fa-pinterest fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="mailto:?subject=using%20ktest.pl%20with%20ubuntu&body=Check out this article: chrisarges.net%2fposts%2f2014-07-01-using-ktestpl-with-ubuntu%2f" aria-label=Email><i class="fas fa-envelope fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="https://getpocket.com/save?url=chrisarges.net%2fposts%2f2014-07-01-using-ktestpl-with-ubuntu%2f&title=using%20ktest.pl%20with%20ubuntu" aria-label=Pocket><i class="fab fa-get-pocket fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="http://reddit.com/submit?url=chrisarges.net%2fposts%2f2014-07-01-using-ktestpl-with-ubuntu%2f&title=using%20ktest.pl%20with%20ubuntu" aria-label=reddit><i class="fab fa-reddit fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="http://www.tumblr.com/share/link?url=chrisarges.net%2fposts%2f2014-07-01-using-ktestpl-with-ubuntu%2f&name=using%20ktest.pl%20with%20ubuntu&description=Bisecting%20the%20kernel%20is%20one%20of%20those%20tasks%20that%26rsquo%3bs%20time-consuming%20and%20error%20prone.%20Ktest.pl%20is%20a%20script%20that%20lives%20in%20the%20linux%20kernel%20source%20tree%20that%20helps%20to%20automate%20this%20process.%20The%20script%20is%20extremely%20extensible%20and%20as%20such%20takes%20time%20to%20understand%20which%20variables%20need%20to%20be%20set%20and%20where.%20In%20this%20post%2c%20I%26rsquo%3bll%20go%20over%20how%20to%20perform%20a%20kernel%20bisection%20using%20a%20VM%20as%20the%20target%20machine.%20In%20this%20example%20I%26rsquo%3bm%20using%20%26lsquo%3bubuntu%26rsquo%3b%20as%20the%20VM%20name." aria-label=Tumblr><i class="fab fa-tumblr fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="https://news.ycombinator.com/submitlink?u=chrisarges.net%2fposts%2f2014-07-01-using-ktestpl-with-ubuntu%2f&t=using%20ktest.pl%20with%20ubuntu" aria-label="Hacker News"><i class="fab fa-hacker-news fa-lg" aria-hidden=true></i></a></li></ul></div><div id=actions-footer><a id=menu-toggle class=icon href=# onclick='return $("#nav-footer").toggle(),!1' aria-label=Menu><i class="fas fa-bars fa-lg" aria-hidden=true></i> Menu</a>
<a id=share-toggle class=icon href=# onclick='return $("#share-footer").toggle(),!1' aria-label=Share><i class="fas fa-share-alt fa-lg" aria-hidden=true></i> share</a>
<a id=top style=display:none class=icon href=# onclick='$("html, body").animate({scrollTop:0},"fast")' aria-label="Top of Page"><i class="fas fa-chevron-up fa-lg" aria-hidden=true></i> Top</a></div></div></div><footer id=footer><div class=footer-left>Copyright &copy; 2023 Chris J Arges</div><div class=footer-right><nav><ul><li><a href=chrisarges.net/>Home</a></li><li><a href=chrisarges.net/about>About</a></li></ul></nav></div></footer></div></body><link rel=stylesheet href=/lib/font-awesome/css/all.min.css><script src=/lib/jquery/jquery.min.js></script>
<script src=/js/main.js></script>
<script src=/chrisarges.net/js/code-copy.js></script></html>